{% extends "!layout.html" %}
// This additional head content makes it possible to embed shiny apps via wasm.
// It's intended for use with the custom sphinx extension directives located
// under docs/source/sphinxext/
// See https://rstudio.github.io/prism-experiments/embedded-app.html
// and https://rstudio.github.io/prism-experiments/guide/site/components.html
{% block extrahead %}
  <script type="module">
    const serviceWorkerPath = "/serviceworker.js";
    // Start the service worker as soon as possible, to maximize the
    // resources it will be able to cache on the first run.
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker
        .register(serviceWorkerPath)
        .then(() => console.log("Service Worker registered"))
        .catch(() => console.log("Service Worker registration failed"));
      navigator.serviceWorker.ready.then(() => {
        if (!navigator.serviceWorker.controller) {
          // For Shift+Reload case; navigator.serviceWorker.controller will
          // never appear until a regular (not Shift+Reload) page load.
          window.location.reload();
        }
      });
    }
  </script>
  <link rel="stylesheet" href="/shinylive/Components/App.css" type="text/css">
  <script src="/shinylive/run-python-blocks.js" type="module"></script>
{% endblock %}
